"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4131],{601:function(t,e,n){n.d(e,{ZP:function(){return i}});var o=n(2752);const r=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))$/,s=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))/g,i=o.vc.create({name:"highlight",addOptions:()=>({multicolor:!1,HTMLAttributes:{}}),addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML:()=>[{tag:"mark"}],renderHTML({HTMLAttributes:t}){return["mark",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[(0,o.Cf)({find:r,type:this.type})]},addPasteRules(){return[(0,o.K9)({find:s,type:this.type})]}})},6761:function(t,e,n){n.d(e,{ZP:function(){return s}});var o=n(2752);const r=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,s=o.NB.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",(0,o.P1)(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[(0,o.x2)({find:r,type:this.type,getAttributes:t=>{const[,,e,n,o]=t;return{src:n,alt:e,title:o}}})]}})},9404:function(t,e,n){n.d(e,{Z:function(){return Pt}});var o=n(2752);const r=(t,e)=>{for(const n in e)t[n]=e[n];return t},s="numeric",i="ascii",l="alpha",a="emoji",c="whitespace";function d(t,e){return t in e||(e[t]=[]),e[t]}function u(t,e,n){e.numeric&&(e.asciinumeric=!0,e.alphanumeric=!0),e.ascii&&(e.asciinumeric=!0,e.alpha=!0),e.asciinumeric&&(e.alphanumeric=!0),e.alpha&&(e.alphanumeric=!0),e.alphanumeric&&(e.domain=!0),e.emoji&&(e.domain=!0);for(const o in e){const e=d(o,n);e.indexOf(t)<0&&e.push(t)}}function h(t){void 0===t&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}h.groups={},h.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let o=0;o<e.jr.length;o++){const n=e.jr[o][0],r=e.jr[o][1];if(r&&n.test(t))return r}return e.jd},has(t,e){return void 0===e&&(e=!1),e?t in this.j:!!this.go(t)},ta(t,e,n,o){for(let r=0;r<t.length;r++)this.tt(t[r],e,n,o)},tr(t,e,n,o){let r;return o=o||h.groups,e&&e.j?r=e:(r=new h(e),n&&o&&u(e,n,o)),this.jr.push([t,r]),r},ts(t,e,n,o){let r=this;const s=t.length;if(!s)return r;for(let i=0;i<s-1;i++)r=r.tt(t[i]);return r.tt(t[s-1],e,n,o)},tt(t,e,n,o){o=o||h.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let l,a=s.go(t);if(a?(l=new h,r(l.j,a.j),l.jr.push.apply(l.jr,a.jr),l.jd=a.jd,l.t=a.t):l=new h,i){if(o)if(l.t&&"string"===typeof l.t){const t=r(function(t,e){const n={};for(const o in e)e[o].indexOf(t)>=0&&(n[o]=!0);return n}(l.t,o),n);u(i,t,o)}else n&&u(i,n,o);l.t=i}return s.j[t]=l,l}};const p=(t,e,n,o,r)=>t.ta(e,n,o,r),f=(t,e,n,o,r)=>t.tr(e,n,o,r),m=(t,e,n,o,r)=>t.ts(e,n,o,r),g=(t,e,n,o,r)=>t.tt(e,n,o,r),b="WORD",w="UWORD",y="LOCALHOST",v="TLD",C="UTLD",k="SCHEME",M="SLASH_SCHEME",_="NUM",A="NL",S="OPENBRACE",T="OPENBRACKET",L="OPENANGLEBRACKET",H="OPENPAREN",E="CLOSEBRACE",x="CLOSEBRACKET",R="CLOSEANGLEBRACKET",N="CLOSEPAREN",O="AMPERSAND",$="APOSTROPHE",P="ASTERISK",I="AT",B="BACKSLASH",z="BACKTICK",D="CARET",j="COLON",K="COMMA",W="DOLLAR",F="DOT",Y="EQUALS",q="EXCLAMATION",V="HYPHEN",U="PERCENT",G="PIPE",Q="PLUS",X="POUND",J="QUERY",Z="QUOTE",tt="SEMI",et="SLASH",nt="TILDE",ot="UNDERSCORE",rt="EMOJI",st="SYM";var it=Object.freeze({__proto__:null,WORD:b,UWORD:w,LOCALHOST:y,TLD:v,UTLD:C,SCHEME:k,SLASH_SCHEME:M,NUM:_,WS:"WS",NL:A,OPENBRACE:S,OPENBRACKET:T,OPENANGLEBRACKET:L,OPENPAREN:H,CLOSEBRACE:E,CLOSEBRACKET:x,CLOSEANGLEBRACKET:R,CLOSEPAREN:N,AMPERSAND:O,APOSTROPHE:$,ASTERISK:P,AT:I,BACKSLASH:B,BACKTICK:z,CARET:D,COLON:j,COMMA:K,DOLLAR:W,DOT:F,EQUALS:Y,EXCLAMATION:q,HYPHEN:V,PERCENT:U,PIPE:G,PLUS:Q,POUND:X,QUERY:J,QUOTE:Z,SEMI:tt,SLASH:et,TILDE:nt,UNDERSCORE:ot,EMOJI:rt,SYM:st});const lt=/[a-z]/,at=/\p{L}/u,ct=/\p{Emoji}/u,dt=/\d/,ut=/\s/;let ht=null,pt=null;function ft(t,e,n,o,r){let s;const i=e.length;for(let l=0;l<i-1;l++){const n=e[l];t.j[n]?s=t.j[n]:(s=new h(o),s.jr=r.slice(),t.j[n]=s),t=s}return s=new h(n),s.jr=r.slice(),t.j[e[i-1]]=s,s}function mt(t){const e=[],n=[];let o=0;for(;o<t.length;){let r=0;for(;"0123456789".indexOf(t[o+r])>=0;)r++;if(r>0){e.push(n.join(""));let s=parseInt(t.substring(o,o+r),10);for(;s>0;s--)n.pop();o+=r}else"_"===t[o]?(e.push(n.join("")),o++):(n.push(t[o]),o++)}return e}const gt={defaultProtocol:"http",events:null,format:wt,formatHref:wt,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function bt(t,e){void 0===e&&(e=null);let n=r({},gt);t&&(n=r(n,t instanceof bt?t.o:t));const o=n.ignoreTags,s=[];for(let r=0;r<o.length;r++)s.push(o[r].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}function wt(t){return t}bt.prototype={o:gt,ignoreTags:[],defaultRender:t=>t,check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const o=null!=e;let r=this.o[t];return r?("object"===typeof r?(r=n.t in r?r[n.t]:gt[t],"function"===typeof r&&o&&(r=r(e,n))):"function"===typeof r&&o&&(r=r(e,n.t,n)),r):r},getObj(t,e,n){let o=this.o[t];return"function"===typeof o&&null!=e&&(o=o(e,n.t,n)),o},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function yt(t,e){this.t="token",this.v=t,this.tk=e}function vt(t,e){class n extends yt{constructor(e,n){super(e,n),this.t=t}}for(const o in e)n.prototype[o]=e[o];return n.t=t,n}yt.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),o=t.get("format",e,this);return n&&o.length>n?o.substring(0,n)+"\u2026":o},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t){return void 0===t&&(t=gt.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toFormattedHref(t),o=t.get("tagName",n,e),s=this.toFormattedString(t),i={},l=t.get("className",n,e),a=t.get("target",n,e),c=t.get("rel",n,e),d=t.getObj("attributes",n,e),u=t.getObj("events",n,e);return i.href=n,l&&(i.class=l),a&&(i.target=a),c&&(i.rel=c),d&&r(i,d),{tagName:o,attributes:i,content:s,eventListeners:u}}};const Ct=vt("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),kt=vt("text"),Mt=vt("nl"),_t=vt("url",{isLink:!0,toHref(t){return void 0===t&&(t=gt.defaultProtocol),this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==y&&t[1].t===j}});const At=t=>new h(t);function St(t,e,n){const o=n[0].s,r=n[n.length-1].e;return new t(e.slice(o,r),n)}const Tt="undefined"!==typeof console&&console&&console.warn||(()=>{}),Lt="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ht={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Et(t,e){if(void 0===e&&(e=!1),Ht.initialized&&Tt(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Lt}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error('linkifyjs: incorrect scheme format.\n 1. Must only contain digits, lowercase ASCII letters or "-"\n 2. Cannot start or end with "-"\n 3. "-" cannot repeat');Ht.customSchemes.push([t,e])}function xt(){Ht.scanner=function(t){void 0===t&&(t=[]);const e={};h.groups=e;const n=new h;null==ht&&(ht=mt("aaa1rp3barth4b_ott3vie4c1le2ogado5udhabi7c_ademy5centure6ountant_s9o1tor4d_s1ult4e_g1ro2tna4f_l1rica5g_akhan5ency5i_g1rbus3force5tel5kdn3l_faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m_azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o_l2partments8p_le4q_uarelle8r_ab1mco4chi3my2pa2t_e3s_da2ia2sociates9t_hleta5torney7u_ction5di_ble3o3spost5thor3o_s4vianca6w_s2x_a2z_ure5ba_by2idu3namex3narepublic11d1k2r_celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b_c1t1va3cg1n2d1e_ats2uty4er2ntley5rlin4st_buy5t2f1g1h_arti5i_ble3d1ke2ng_o3o1z2j1lack_friday9ockbuster8g1omberg7ue3m_s1w2n_pparibas9o_ats3ehringer8fa2m1nd2o_k_ing5sch2tik2on4t1utique6x2r_adesco6idgestone9oadway5ker3ther5ussels7s1t1uild_ers6siness6y1zz3v1w1y1z_h3ca_b1fe2l_l1vinklein9m_era3p2non3petown5ital_one8r_avan4ds2e_er_s4s2sa1e1h1ino4t_ering5holic7ba1n1re2s2c1d1enter4o1rn3f_a1d2g1h_anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i_priani6rcle4sco3tadel4i_c2y_eats7k1l_aims4eaning6ick2nic1que6othing5ud3ub_med6m1n1o_ach3des3ffee4llege4ogne5m_cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking_channel11l1p2rsica5untry4pon_s4rses6pa2r_edit_card4union9icket5own3s1uise_s6u_isinella9v1w1x1y_mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e_al_er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si_gn4v2hl2iamonds6et2gital5rect_ory7scount3ver5h2y2j1k1m1np2o_cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c_o2deka3u_cation8e1g1mail3erck5nergy4gineer_ing9terprises10pson4quipment8r_icsson6ni3s_q1tate5t_isalat7u_rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n_s2rm_ers5shion4t3edex3edback6rrari3ero6i_at2delity5o2lm2nal1nce1ial7re_stone6mdale6sh_ing5t_ness6j1k1lickr3ghts4r2orist4wers5y2m1o_o_d_network8tball6rd1ex2sale4um3undation8x2r_ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n_d2rniture7tbol5yi3ga_l_lery3o1up4me_s3p1rden4y2b_iz3d_n2e_a1nt_ing5orge5f1g_ee3h1i_ft_s3ves2ing5l_ass3e1obal2o4m_ail3bh2o1x2n1odaddy5ld_point6f2o_dyear5g_le4p1t1v2p1q1r_ainger5phics5tis4een3ipe3ocery4up4s1t1u_ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc_bank7ealth_care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k_t2m1n1ockey4ldings5iday5medepot5goods5s_ense7nda3rse3spital5t_ing5t_eles2s3mail5use3w2r1sbc3t1u_ghes5yatt3undai7ibm2cbc2e1u2d1e_ee3fm2kano4l1m_amat4db2mo_bilien9n_c1dustries8finiti5o2g1k1stitute6urance4e4t_ernational10uit4vestments10o1piranga7q1r_ish4s_maili5t_anbul7t_au2v3jaguar4va3cb2e_ep2tzt3welry6io2ll2m_p2nj2o_bs1urg4t1y2p_morgan6rs3uegos4niper7kaufen5ddi3e_rryhotels6logistics9properties14fh2g1h1i_a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p_mg2n2r_d1ed3uokgroup8w1y_oto4z2la_caixa5mborghini8er3ncaster5ia3d_rover6xess5salle5t_ino3robe5w_yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i_dl2fe_insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan_s3cker3us3l1ndon4tte1o3ve3pl_financial11r1s1t_d_a3u_ndbeck6xe1ury5v1y2ma_cys3drid4if1son4keup4n_agement7go3p1rket_ing3s4riott5shalls7serati6ttel5ba2c_kinsey7d1e_d_ia3et2lbourne7me1orial6n_u2rckmsd7g1h1iami3crosoft7l1ni1t2t_subishi9k1l_b1s2m_a2n1o_bi_le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to_rcycles9v_ie4p1q1r1s_d2t_n1r2u_seum3ic3tual5v1w1x1y1z2na_b1goya4me2tura4vy3ba2c1e_c1t_bank4flix4work5ustar5w_s2xt_direct7us4f_l2g_o2hk2i_co2ke1on3nja3ssan1y5l1o_kia3rthwesternmutual14on4w_ruz3tv4p1r_a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan_group9dnavy5lo3m_ega4ne1g1l_ine5oo2pen3racle3nge4g_anic5igins6saka4tsuka4t2vh3pa_ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e_t2f_izer5g1h_armacy6d1ilips5one2to_graphy6s4ysio5ics1tet2ures6d1n_g1k2oneer5zza4k1l_ace2y_station9umbing5s3m1n_c2ohl2ker3litie5rn2st3r_america6xi3ess3ime3o_d_uctions8f1gressive8mo2perties3y5tection8u_dential9s1t1ub2w_c2y2qa1pon3uebec3st5racing4dio4e_ad1lestate6tor2y4cipes5d_stone5umbrella9hab3ise_n3t2liance6n_t_als5pair3ort3ublican8st_aurant8view_s5xroth6ich_ardli6oh3l1o1p2o_cher3ks3deo3gers4om3s_vp3u_gby3hr2n2w_e2yukyu6sa_arland6fe_ty4kura4le1on3msclub4ung5ndvik_coromant12ofi4p1rl2s1ve2xo3b_i1s2c_a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e_arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x_y3fr2g1h_angrila6rp2w2ell3ia1ksha5oes2p_ping5uji3w_time7i_lk2na1gles5te3j1k_i_n2y_pe4l_ing4m_art3ile4n_cf3o_ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa_ce3ort2t3r_l2s1t_ada2ples4r1tebank4farm7c_group6ockholm6rage3e3ream4udio2y3yle4u_cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y_dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x_i3c_i2d_k2eam2ch_nology8l1masek5nnis4va3f1g1h_d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j_maxx4x2k_maxx5l1m_all4n1o_day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r_ade1ing4ining5vel_channel7ers_insurance16ust3v2t1ube2i1nes3shu4v_s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va_cations7na1guard7c1e_gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i_ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u_elos6wales2mart4ter4ng_gou5tch_es6eather_channel12bcam3er2site5d_ding5ibo2r3f1hoswho6ien2ki2lliamhill9n_dows4e1ners6me2olterskluwer11odside6rk_s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u_tube6t1un3za_ppos4ra3ero3ip2m1one3uerich6w2")),null==pt&&(pt=mt("\u03b5\u03bb1\u03c52\u0431\u04331\u0435\u043b3\u0434\u0435\u0442\u04384\u0435\u044e2\u043a\u0430\u0442\u043e\u043b\u0438\u043a6\u043e\u043c3\u043c\u043a\u04342\u043e\u043d1\u0441\u043a\u0432\u04306\u043e\u043d\u043b\u0430\u0439\u043d5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043a\u04403\u049b\u0430\u04373\u0570\u0561\u05753\u05d9\u05e9\u05e8\u05d0\u05dc5\u05e7\u05d5\u05dd3\u0627\u0628\u0648\u0638\u0628\u064a5\u062a\u0635\u0627\u0644\u0627\u062a6\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062f\u06464\u0628\u062d\u0631\u064a\u06465\u062c\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062f\u064a\u06296\u0639\u0644\u064a\u0627\u06465\u0645\u063a\u0631\u06285\u0645\u0627\u0631\u0627\u062a5\u06cc\u0631\u0627\u06465\u0628\u0627\u0631\u062a2\u0632\u0627\u06314\u064a\u062a\u06433\u06be\u0627\u0631\u062a5\u062a\u0648\u0646\u06334\u0633\u0648\u062f\u0627\u06463\u0631\u064a\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064a\u06466\u0642\u0637\u06313\u0643\u0627\u062b\u0648\u0644\u064a\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064a\u0633\u064a\u06275\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067e\u0627\u06a9\u0633\u062a\u0627\u06467\u0680\u0627\u0631\u062a4\u0915\u0949\u092e3\u0928\u0947\u091f3\u092d\u093e\u0930\u0924_\u092e\u094d3\u094b\u09245\u0938\u0902\u0917\u0920\u09285\u09ac\u09be\u0982\u09b2\u09be5\u09ad\u09be\u09b0\u09a42\u09f0\u09a44\u0a2d\u0a3e\u0a30\u0a244\u0aad\u0abe\u0ab0\u0aa44\u0b2d\u0b3e\u0b30\u0b244\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe6\u0bb2\u0b99\u0bcd\u0b95\u0bc86\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd11\u0c2d\u0c3e\u0c30\u0c24\u0c4d5\u0cad\u0cbe\u0cb0\u0ca44\u0d2d\u0d3e\u0d30\u0d24\u0d025\u0dbd\u0d82\u0d9a\u0dcf4\u0e04\u0e2d\u0e213\u0e44\u0e17\u0e223\u0ea5\u0eb2\u0ea73\u10d2\u10d42\u307f\u3093\u306a3\u30a2\u30de\u30be\u30f34\u30af\u30e9\u30a6\u30c94\u30b0\u30fc\u30b0\u30eb4\u30b3\u30e02\u30b9\u30c8\u30a23\u30bb\u30fc\u30eb3\u30d5\u30a1\u30c3\u30b7\u30e7\u30f36\u30dd\u30a4\u30f3\u30c84\u4e16\u754c2\u4e2d\u4fe11\u56fd1\u570b1\u6587\u7f513\u4e9a\u9a6c\u900a3\u4f01\u4e1a2\u4f5b\u5c712\u4fe1\u606f2\u5065\u5eb72\u516b\u53662\u516c\u53f81\u76ca2\u53f0\u6e7e1\u70632\u5546\u57ce1\u5e971\u68072\u5609\u91cc_\u5927\u9152\u5e975\u5728\u7ebf2\u5927\u62ff2\u5929\u4e3b\u65593\u5a31\u4e502\u5bb6\u96fb2\u5e7f\u4e1c2\u5fae\u535a2\u6148\u55842\u6211\u7231\u4f603\u624b\u673a2\u62db\u80582\u653f\u52a11\u5e9c2\u65b0\u52a0\u57612\u95fb2\u65f6\u5c1a2\u66f8\u7c4d2\u673a\u67842\u6de1\u9a6c\u95213\u6e38\u620f2\u6fb3\u95802\u70b9\u770b2\u79fb\u52a82\u7ec4\u7ec7\u673a\u67844\u7f51\u57401\u5e971\u7ad91\u7edc2\u8054\u901a2\u8c37\u6b4c2\u8d2d\u72692\u901a\u8ca92\u96c6\u56e22\u96fb\u8a0a\u76c8\u79d14\u98de\u5229\u6d663\u98df\u54c12\u9910\u53852\u9999\u683c\u91cc\u62c93\u6e2f2\ub2f7\ub1371\ucef42\uc0bc\uc1312\ud55c\uad6d2")),g(n,"'",$),g(n,"{",S),g(n,"[",T),g(n,"<",L),g(n,"(",H),g(n,"}",E),g(n,"]",x),g(n,">",R),g(n,")",N),g(n,"&",O),g(n,"*",P),g(n,"@",I),g(n,"`",z),g(n,"^",D),g(n,":",j),g(n,",",K),g(n,"$",W),g(n,".",F),g(n,"=",Y),g(n,"!",q),g(n,"-",V),g(n,"%",U),g(n,"|",G),g(n,"+",Q),g(n,"#",X),g(n,"?",J),g(n,'"',Z),g(n,"/",et),g(n,";",tt),g(n,"~",nt),g(n,"_",ot),g(n,"\\",B);const o=f(n,dt,_,{[s]:!0});f(o,dt,o);const d=f(n,lt,b,{[i]:!0});f(d,lt,d);const p=f(n,at,w,{[l]:!0});f(p,lt),f(p,at,p);const gt=f(n,ut,"WS",{[c]:!0});g(n,"\n",A,{[c]:!0}),g(gt,"\n"),f(gt,ut,gt);const bt=f(n,ct,rt,{[a]:!0});f(bt,ct,bt),g(bt,"\ufe0f",bt);const wt=g(bt,"\u200d");f(wt,ct,bt);const yt=[[lt,d]],vt=[[lt,null],[at,p]];for(let r=0;r<ht.length;r++)ft(n,ht[r],v,b,yt);for(let r=0;r<pt.length;r++)ft(n,pt[r],C,w,vt);u(v,{tld:!0,ascii:!0},e),u(C,{utld:!0,alpha:!0},e),ft(n,"file",k,b,yt),ft(n,"mailto",k,b,yt),ft(n,"http",M,b,yt),ft(n,"https",M,b,yt),ft(n,"ftp",M,b,yt),ft(n,"ftps",M,b,yt),u(k,{scheme:!0,ascii:!0},e),u(M,{slashscheme:!0,ascii:!0},e),t=t.sort(((t,e)=>t[0]>e[0]?1:-1));for(let r=0;r<t.length;r++){const e=t[r][0],o=t[r][1]?{scheme:!0}:{slashscheme:!0};e.indexOf("-")>=0?o.domain=!0:lt.test(e)?dt.test(e)?o.asciinumeric=!0:o.ascii=!0:o.numeric=!0,m(n,e,e,o)}return m(n,"localhost",y,{ascii:!0}),n.jd=new h(st),{start:n,tokens:r({groups:e},it)}}(Ht.customSchemes);for(let t=0;t<Ht.tokenQueue.length;t++)Ht.tokenQueue[t][1]({scanner:Ht.scanner});Ht.parser=function(t){let{groups:e}=t;const n=e.domain.concat([O,P,I,B,z,D,W,Y,V,_,U,G,Q,X,et,st,nt,ot]),o=[$,R,E,x,N,j,K,F,q,L,S,T,H,J,Z,tt],r=[O,$,P,B,z,D,E,W,Y,V,_,S,U,G,Q,X,J,et,st,nt,ot],s=At(),i=g(s,nt);p(i,r,i),p(i,e.domain,i);const l=At(),a=At(),c=At();p(s,e.domain,l),p(s,e.scheme,a),p(s,e.slashscheme,c),p(l,r,i),p(l,e.domain,l);const d=g(l,I);g(i,I,d),g(a,I,d),g(c,I,d);const u=g(i,F);p(u,r,i),p(u,e.domain,i);const h=At();p(d,e.domain,h),p(h,e.domain,h);const f=g(h,F);p(f,e.domain,h);const m=At(Ct);p(f,e.tld,m),p(f,e.utld,m),g(d,y,m);const b=g(h,V);p(b,e.domain,h),p(m,e.domain,h),g(m,F,f),g(m,V,b);const w=g(m,j);p(w,e.numeric,Ct);const v=g(l,V),C=g(l,F);p(v,e.domain,l),p(C,r,i),p(C,e.domain,l);const k=At(_t);p(C,e.tld,k),p(C,e.utld,k),p(k,e.domain,l),p(k,r,i),g(k,F,C),g(k,V,v),g(k,I,d);const M=g(k,j),rt=At(_t);p(M,e.numeric,rt);const lt=At(_t),at=At();p(lt,n,lt),p(lt,o,at),p(at,n,lt),p(at,o,at),g(k,et,lt),g(rt,et,lt);const ct=g(a,j),dt=g(c,j),ut=g(dt,et);g(ut,et,ct),p(a,e.domain,l),g(a,F,C),g(a,V,v),p(c,e.domain,l),g(c,F,C),g(c,V,v),p(ct,e.domain,lt),g(ct,et,lt);const ht=g(lt,S),pt=g(lt,T),ft=g(lt,L),mt=g(lt,H);g(at,S,ht),g(at,T,pt),g(at,L,ft),g(at,H,mt),g(ht,E,lt),g(pt,x,lt),g(ft,R,lt),g(mt,N,lt),g(ht,E,lt);const gt=At(_t),bt=At(_t),wt=At(_t),yt=At(_t);p(ht,n,gt),p(pt,n,bt),p(ft,n,wt),p(mt,n,yt);const vt=At(),kt=At(),St=At(),Tt=At();return p(ht,o),p(pt,o),p(ft,o),p(mt,o),p(gt,n,gt),p(bt,n,bt),p(wt,n,wt),p(yt,n,yt),p(gt,o,gt),p(bt,o,bt),p(wt,o,wt),p(yt,o,yt),p(vt,n,vt),p(kt,n,bt),p(St,n,wt),p(Tt,n,yt),p(vt,o,vt),p(kt,o,kt),p(St,o,St),p(Tt,o,Tt),g(bt,x,lt),g(wt,R,lt),g(yt,N,lt),g(gt,E,lt),g(kt,x,lt),g(St,R,lt),g(Tt,N,lt),g(vt,N,lt),g(s,y,k),g(s,A,Mt),{start:s,tokens:it}}(Ht.scanner.tokens);for(let t=0;t<Ht.pluginQueue.length;t++)Ht.pluginQueue[t][1]({scanner:Ht.scanner,parser:Ht.parser});Ht.initialized=!0}function Rt(t){return Ht.initialized||xt(),function(t,e,n){let o=n.length,r=0,s=[],i=[];for(;r<o;){let l=t,a=null,c=null,d=0,u=null,h=-1;for(;r<o&&!(a=l.go(n[r].t));)i.push(n[r++]);for(;r<o&&(c=a||l.go(n[r].t));)a=null,l=c,l.accepts()?(h=0,u=l):h>=0&&h++,r++,d++;if(h<0)r-=d,r<o&&(i.push(n[r]),r++);else{i.length>0&&(s.push(St(kt,e,i)),i=[]),r-=h,d-=h;const t=u.t,o=n.slice(r-d,r);s.push(St(t,e,o))}}return i.length>0&&s.push(St(kt,e,i)),s}(Ht.parser.start,t,function(t,e){const n=function(t){const e=[],n=t.length;let o=0;for(;o<n;){let r,s=t.charCodeAt(o),i=s<55296||s>56319||o+1===n||(r=t.charCodeAt(o+1))<56320||r>57343?t[o]:t.slice(o,o+2);e.push(i),o+=i.length}return e}(e.replace(/[A-Z]/g,(t=>t.toLowerCase()))),o=n.length,r=[];let s=0,i=0;for(;i<o;){let l=t,a=null,c=0,d=null,u=-1,h=-1;for(;i<o&&(a=l.go(n[i]));)l=a,l.accepts()?(u=0,h=0,d=l):u>=0&&(u+=n[i].length,h++),c+=n[i].length,s+=n[i].length,i++;s-=u,i-=h,c-=u,r.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return r}(Ht.scanner.start,t))}function Nt(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),e&&"object"===typeof e){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const o=new bt(n),r=Rt(t),s=[];for(let i=0;i<r.length;i++){const t=r[i];!t.isLink||e&&t.t!==e||s.push(t.toFormattedObject(o))}return s}function Ot(t,e){void 0===e&&(e=null);const n=Rt(t);return 1===n.length&&n[0].isLink&&(!e||n[0].t===e)}var $t=n(2376);const Pt=o.vc.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach((t=>{"string"!==typeof t?Et(t.scheme,t.optionalSlashes):Et(t)}))},onDestroy(){h.groups={},Ht.scanner=null,Ht.parser=null,Ht.tokenQueue=[],Ht.pluginQueue=[],Ht.customSchemes=[],Ht.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:t}){return["a",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setLink:t=>({chain:e})=>e().setMark(this.name,t).setMeta("preventAutolink",!0).run(),toggleLink:t=>({chain:e})=>e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,o.K9)({find:t=>Nt(t).filter((t=>!this.options.validate||this.options.validate(t.value))).filter((t=>t.isLink)).map((t=>({text:t.value,index:t.start,data:t}))),type:this.type,getAttributes:t=>{var e;return{href:null===(e=t.data)||void 0===e?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.autolink&&t.push(function(t){return new $t.Sy({key:new $t.H$("autolink"),appendTransaction:(e,n,r)=>{const s=e.some((t=>t.docChanged))&&!n.doc.eq(r.doc),i=e.some((t=>t.getMeta("preventAutolink")));if(!s||i)return;const{tr:l}=r,a=(0,o.XP)(n.doc,[...e]),{mapping:c}=a;return(0,o.QC)(a).forEach((({oldRange:e,newRange:s})=>{(0,o.tI)(e.from,e.to,n.doc).filter((e=>e.mark.type===t.type)).forEach((e=>{const s=c.map(e.from),i=c.map(e.to),a=(0,o.tI)(s,i,r.doc).filter((e=>e.mark.type===t.type));if(!a.length)return;const d=a[0],u=n.doc.textBetween(e.from,e.to,void 0," "),h=r.doc.textBetween(d.from,d.to,void 0," "),p=Ot(u),f=Ot(h);p&&!f&&l.removeMark(d.from,d.to,t.type)}));const i=(0,o.b5)(r.doc,s,(t=>t.isTextblock));let a,d;if(i.length>1?(a=i[0],d=r.doc.textBetween(a.pos,a.pos+a.node.nodeSize,void 0," ")):i.length&&r.doc.textBetween(s.from,s.to," "," ").endsWith(" ")&&(a=i[0],d=r.doc.textBetween(a.pos,s.to,void 0," ")),a&&d){const e=d.split(" ").filter((t=>""!==t));if(e.length<=0)return!1;const n=e[e.length-1],o=a.pos+d.lastIndexOf(n);if(!n)return!1;Nt(n).filter((t=>t.isLink)).filter((e=>!t.validate||t.validate(e.value))).map((t=>({...t,from:o+t.start+1,to:o+t.end+1}))).forEach((e=>{l.addMark(e.from,e.to,t.type.create({href:e.href}))}))}})),l.steps.length?l:void 0}})}({type:this.type,validate:this.options.validate})),this.options.openOnClick&&t.push(function(t){return new $t.Sy({key:new $t.H$("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,i,l;const a=(0,o.u9)(e.state,t.type.name),c=null===(s=r.target)||void 0===s?void 0:s.closest("a"),d=null!==(i=null===c||void 0===c?void 0:c.href)&&void 0!==i?i:a.href,u=null!==(l=null===c||void 0===c?void 0:c.target)&&void 0!==l?l:a.target;return!(!c||!d)&&(window.open(d,u),!0)}}})}({type:this.type})),this.options.linkOnPaste&&t.push(function(t){return new $t.Sy({key:new $t.H$("handlePasteLink"),props:{handlePaste:(e,n,o)=>{const{state:r}=e,{selection:s}=r,{empty:i}=s;if(i)return!1;let l="";o.content.forEach((t=>{l+=t.textContent}));const a=Nt(l).find((t=>t.isLink&&t.value===l));return!(!l||!a)&&(t.editor.commands.setMark(t.type,{href:a.href}),!0)}}})}({editor:this.editor,type:this.type})),t}})},658:function(t,e,n){n.d(e,{Z:function(){return r}});var o=n(2752);const r=o.NB.create({name:"tableCell",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}),tableRole:"cell",isolating:!0,parseHTML:()=>[{tag:"td"}],renderHTML({HTMLAttributes:t}){return["td",(0,o.P1)(this.options.HTMLAttributes,t),0]}})},3626:function(t,e,n){n.d(e,{Z:function(){return r}});var o=n(2752);const r=o.NB.create({name:"tableHeader",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?[parseInt(e,10)]:null}}}),tableRole:"header_cell",isolating:!0,parseHTML:()=>[{tag:"th"}],renderHTML({HTMLAttributes:t}){return["th",(0,o.P1)(this.options.HTMLAttributes,t),0]}})},3991:function(t,e,n){n.d(e,{Z:function(){return r}});var o=n(2752);const r=o.NB.create({name:"tableRow",addOptions:()=>({HTMLAttributes:{}}),content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML:()=>[{tag:"tr"}],renderHTML({HTMLAttributes:t}){return["tr",(0,o.P1)(this.options.HTMLAttributes,t),0]}})},363:function(t,e,n){n.d(e,{ZP:function(){return wt}});var o,r,s=n(2752),i=n(2376),l=n(2806),a=n(4348),c=n(3225),d=n(6560);if("undefined"!=typeof WeakMap){let t=new WeakMap;o=e=>t.get(e),r=(e,n)=>(t.set(e,n),n)}else{const t=[],e=10;let n=0;o=e=>{for(let n=0;n<t.length;n+=2)if(t[n]==e)return t[n+1]},r=(o,r)=>(n==e&&(n=0),t[n++]=o,t[n++]=r)}var u=class{constructor(t,e,n,o){this.width=t,this.height=e,this.map=n,this.problems=o}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const o=e%this.width,r=e/this.width|0;let s=o+1,i=r+1;for(let t=1;s<this.width&&this.map[e+t]==n;t++)s++;for(let t=1;i<this.height&&this.map[e+this.width*t]==n;t++)i++;return{left:o,top:r,right:s,bottom:i}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:o,right:r,top:s,bottom:i}=this.findCell(t);return"horiz"==e?(n<0?0==o:r==this.width)?null:this.map[s*this.width+(n<0?o-1:r)]:(n<0?0==s:i==this.height)?null:this.map[o+this.width*(n<0?s-1:i)]}rectBetween(t,e){const{left:n,right:o,top:r,bottom:s}=this.findCell(t),{left:i,right:l,top:a,bottom:c}=this.findCell(e);return{left:Math.min(n,i),top:Math.min(r,a),right:Math.max(o,l),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let o=t.top;o<t.bottom;o++)for(let r=t.left;r<t.right;r++){const s=o*this.width+r,i=this.map[s];n[i]||(n[i]=!0,r==t.left&&r&&this.map[s-1]==i||o==t.top&&o&&this.map[s-this.width]==i||e.push(i))}return e}positionAt(t,e,n){for(let o=0,r=0;;o++){const s=r+n.child(o).nodeSize;if(o==t){let n=e+t*this.width;const o=(t+1)*this.width;for(;n<o&&this.map[n]<r;)n++;return n==o?s-1:this.map[n]}r=s}}static get(t){return o(t)||r(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);const e=function(t){let e=-1,n=!1;for(let o=0;o<t.childCount;o++){const r=t.child(o);let s=0;if(n)for(let e=0;e<o;e++){const n=t.child(e);for(let t=0;t<n.childCount;t++){const r=n.child(t);e+r.attrs.rowspan>o&&(s+=r.attrs.colspan)}}for(let t=0;t<r.childCount;t++){const e=r.child(t);s+=e.attrs.colspan,e.attrs.rowspan>1&&(n=!0)}-1==e?e=s:e!=s&&(e=Math.max(e,s))}return e}(t),n=t.childCount,o=[];let r=0,s=null;const i=[];for(let c=0,d=e*n;c<d;c++)o[c]=0;for(let c=0,d=0;c<n;c++){const l=t.child(c);d++;for(let t=0;;t++){for(;r<o.length&&0!=o[r];)r++;if(t==l.childCount)break;const a=l.child(t),{colspan:u,rowspan:h,colwidth:p}=a.attrs;for(let t=0;t<h;t++){if(t+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:d,n:h-t});break}const l=r+t*e;for(let t=0;t<u;t++){0==o[l+t]?o[l+t]=d:(s||(s=[])).push({type:"collision",row:c,pos:d,n:u-t});const n=p&&p[t];if(n){const o=(l+t)%e*2,r=i[o];null==r||r!=n&&1==i[o+1]?(i[o]=n,i[o+1]=1):r==n&&i[o+1]++}}}r+=u,d+=a.nodeSize}const a=(c+1)*e;let u=0;for(;r<a;)0==o[r++]&&u++;u&&(s||(s=[])).push({type:"missing",row:c,n:u}),d++}const l=new u(e,n,o,s);let a=!1;for(let c=0;!a&&c<i.length;c+=2)null!=i[c]&&i[c+1]<n&&(a=!0);a&&function(t,e,n){t.problems||(t.problems=[]);const o={};for(let r=0;r<t.map.length;r++){const s=t.map[r];if(o[s])continue;o[s]=!0;const i=n.nodeAt(s);if(!i)throw new RangeError(`No cell with offset ${s} found`);let l=null;const a=i.attrs;for(let n=0;n<a.colspan;n++){const o=e[2*((r+n)%t.width)];null==o||a.colwidth&&a.colwidth[n]==o||((l||(l=h(a)))[n]=o)}l&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:l})}}(l,i,t);return l}(t))}};function h(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function p(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const o=t.nodes[n],r=o.spec.tableRole;r&&(e[r]=o)}}return e}var f=new i.H$("selectingCells");function m(t){for(let e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function g(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if("row"==e.node(n).type.spec.tableRole)return!0;return!1}function b(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&"cell"==e.node.type.spec.tableRole)return e.$anchor;const n=m(e.$head)||function(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const o=e.type.spec.tableRole;if("cell"==o||"header_cell"==o)return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const o=e.type.spec.tableRole;if("cell"==o||"header_cell"==o)return t.doc.resolve(n-e.nodeSize)}}(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function w(t){return"row"==t.parent.type.spec.tableRole&&!!t.nodeAfter}function y(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function v(t,e,n){const o=t.node(-1),r=u.get(o),s=t.start(-1),i=r.nextCell(t.pos-s,e,n);return null==i?null:t.node(0).resolve(s+i)}function C(t,e,n=1){const o={...t,colspan:t.colspan-n};return o.colwidth&&(o.colwidth=o.colwidth.slice(),o.colwidth.splice(e,n),o.colwidth.some((t=>t>0))||(o.colwidth=null)),o}function k(t,e,n=1){const o={...t,colspan:t.colspan+n};if(o.colwidth){o.colwidth=o.colwidth.slice();for(let t=0;t<n;t++)o.colwidth.splice(e,0,0)}return o}var M=class extends i.Y1{constructor(t,e=t){const n=t.node(-1),o=u.get(n),r=t.start(-1),s=o.rectBetween(t.pos-r,e.pos-r),l=t.node(0),a=o.cellsInRect(s).filter((t=>t!=e.pos-r));a.unshift(e.pos-r);const c=a.map((t=>{const e=n.nodeAt(t);if(!e)throw RangeError(`No cell with offset ${t} found`);const o=r+t+1;return new i.xm(l.resolve(o),l.resolve(o+e.content.size))}));super(c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=e}map(t,e){const n=t.resolve(e.map(this.$anchorCell.pos)),o=t.resolve(e.map(this.$headCell.pos));if(w(n)&&w(o)&&y(n,o)){const t=this.$anchorCell.node(-1)!=n.node(-1);return t&&this.isRowSelection()?M.rowSelection(n,o):t&&this.isColSelection()?M.colSelection(n,o):new M(n,o)}return i.Bs.between(n,o)}content(){const t=this.$anchorCell.node(-1),e=u.get(t),n=this.$anchorCell.start(-1),o=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),r={},s=[];for(let a=o.top;a<o.bottom;a++){const n=[];for(let s=a*e.width+o.left,i=o.left;i<o.right;i++,s++){const i=e.map[s];if(r[i])continue;r[i]=!0;const l=e.findCell(i);let a=t.nodeAt(i);if(!a)throw RangeError(`No cell with offset ${i} found`);const c=o.left-l.left,d=l.right-o.right;if(c>0||d>0){let t=a.attrs;if(c>0&&(t=C(t,0,c)),d>0&&(t=C(t,t.colspan-d,d)),l.left<o.left){if(a=a.type.createAndFill(t),!a)throw RangeError(`Could not create cell with attrs ${JSON.stringify(t)}`)}else a=a.type.create(t,a.content)}if(l.top<o.top||l.bottom>o.bottom){const t={...a.attrs,rowspan:Math.min(l.bottom,o.bottom)-Math.max(l.top,o.top)};a=l.top<o.top?a.type.createAndFill(t):a.type.create(t,a.content)}n.push(a)}s.push(t.child(a).copy(l.HY.from(n)))}const i=this.isColSelection()&&this.isRowSelection()?t:s;return new l.p2(l.HY.from(i),1,1)}replace(t,e=l.p2.empty){const n=t.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){const{$from:r,$to:i}=o[s],a=t.mapping.slice(n);t.replace(a.map(r.pos),a.map(i.pos),s?l.p2.empty:e)}const r=i.Y1.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)),-1);r&&t.setSelection(r)}replaceWith(t,e){this.replace(t,new l.p2(l.HY.from(e),0,0))}forEachCell(t){const e=this.$anchorCell.node(-1),n=u.get(e),o=this.$anchorCell.start(-1),r=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let s=0;s<r.length;s++)t(e.nodeAt(r[s]),o+r[s])}isColSelection(){const t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;const n=t+this.$anchorCell.nodeAfter.attrs.rowspan,o=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,o)==this.$headCell.node(-1).childCount}static colSelection(t,e=t){const n=t.node(-1),o=u.get(n),r=t.start(-1),s=o.findCell(t.pos-r),i=o.findCell(e.pos-r),l=t.node(0);return s.top<=i.top?(s.top>0&&(t=l.resolve(r+o.map[s.left])),i.bottom<o.height&&(e=l.resolve(r+o.map[o.width*(o.height-1)+i.right-1]))):(i.top>0&&(e=l.resolve(r+o.map[i.left])),s.bottom<o.height&&(t=l.resolve(r+o.map[o.width*(o.height-1)+s.right-1]))),new M(t,e)}isRowSelection(){const t=this.$anchorCell.node(-1),e=u.get(t),n=this.$anchorCell.start(-1),o=e.colCount(this.$anchorCell.pos-n),r=e.colCount(this.$headCell.pos-n);if(Math.min(o,r)>0)return!1;const s=o+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,i)==e.width}eq(t){return t instanceof M&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,e=t){const n=t.node(-1),o=u.get(n),r=t.start(-1),s=o.findCell(t.pos-r),i=o.findCell(e.pos-r),l=t.node(0);return s.left<=i.left?(s.left>0&&(t=l.resolve(r+o.map[s.top*o.width])),i.right<o.width&&(e=l.resolve(r+o.map[o.width*(i.top+1)-1]))):(i.left>0&&(e=l.resolve(r+o.map[i.top*o.width])),s.right<o.width&&(t=l.resolve(r+o.map[o.width*(s.top+1)-1]))),new M(t,e)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,e){return new M(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){return new M(t.resolve(e),t.resolve(n))}getBookmark(){return new _(this.$anchorCell.pos,this.$headCell.pos)}};M.prototype.visible=!1,i.Y1.jsonID("cell",M);var _=class{constructor(t,e){this.anchor=t,this.head=e}map(t){return new _(t.map(this.anchor),t.map(this.head))}resolve(t){const e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&y(e,n)?new M(e,n):i.Y1.near(n,1)}};function A(t){if(!(t.selection instanceof M))return null;const e=[];return t.selection.forEachCell(((t,n)=>{e.push(a.p.node(n,n+t.nodeSize,{class:"selectedCell"}))})),a.EH.create(t.doc,e)}var S=new i.H$("fix-tables");function T(t,e,n,o){const r=t.childCount,s=e.childCount;t:for(let i=0,l=0;i<s;i++){const s=e.child(i);for(let e=l,o=Math.min(r,i+3);e<o;e++)if(t.child(e)==s){l=e+1,n+=s.nodeSize;continue t}o(s,n),l<r&&t.child(l).sameMarkup(s)?T(t.child(l),s,n+1,o):s.nodesBetween(0,s.content.size,o,n+1),n+=s.nodeSize}}function L(t,e){let n;const o=(e,o)=>{"table"==e.type.spec.tableRole&&(n=function(t,e,n,o){const r=u.get(e);if(!r.problems)return o;o||(o=t.tr);const s=[];for(let a=0;a<r.height;a++)s.push(0);for(let a=0;a<r.problems.length;a++){const t=r.problems[a];if("collision"==t.type){const r=e.nodeAt(t.pos);if(!r)continue;const i=r.attrs;for(let e=0;e<i.rowspan;e++)s[t.row+e]+=t.n;o.setNodeMarkup(o.mapping.map(n+1+t.pos),null,C(i,i.colspan-t.n,t.n))}else if("missing"==t.type)s[t.row]+=t.n;else if("overlong_rowspan"==t.type){const r=e.nodeAt(t.pos);if(!r)continue;o.setNodeMarkup(o.mapping.map(n+1+t.pos),null,{...r.attrs,rowspan:r.attrs.rowspan-t.n})}else if("colwidth mismatch"==t.type){const r=e.nodeAt(t.pos);if(!r)continue;o.setNodeMarkup(o.mapping.map(n+1+t.pos),null,{...r.attrs,colwidth:t.colwidth})}}let i,l;for(let a=0;a<s.length;a++)s[a]&&(null==i&&(i=a),l=a);for(let a=0,c=n+1;a<r.height;a++){const n=e.child(a),r=c+n.nodeSize,d=s[a];if(d>0){let e="cell";n.firstChild&&(e=n.firstChild.type.spec.tableRole);const s=[];for(let n=0;n<d;n++){const n=p(t.schema)[e].createAndFill();n&&s.push(n)}const u=0!=a&&i!=a-1||l!=a?r-1:c+1;o.insert(o.mapping.map(u),s)}c=r}return o.setMeta(S,{fixTables:!0})}(t,e,o,n))};return e?e.doc!=t.doc&&T(e.doc,t.doc,0,o):t.doc.descendants(o),n}function H(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:o}=t;for(;1==e.childCount&&(n>0&&o>0||"table"==e.child(0).type.spec.tableRole);)n--,o--,e=e.child(0).content;const r=e.child(0),s=r.type.spec.tableRole,i=r.type.schema,a=[];if("row"==s)for(let c=0;c<e.childCount;c++){let t=e.child(c).content;const r=c?0:Math.max(0,n-1),s=c<e.childCount-1?0:Math.max(0,o-1);(r||s)&&(t=E(p(i).row,new l.p2(t,r,s)).content),a.push(t)}else{if("cell"!=s&&"header_cell"!=s)return null;a.push(n||o?E(p(i).row,new l.p2(e,n,o)).content:e)}return function(t,e){const n=[];for(let r=0;r<e.length;r++){const t=e[r];for(let e=t.childCount-1;e>=0;e--){const{rowspan:o,colspan:s}=t.child(e).attrs;for(let t=r;t<r+o;t++)n[t]=(n[t]||0)+s}}let o=0;for(let r=0;r<n.length;r++)o=Math.max(o,n[r]);for(let r=0;r<n.length;r++)if(r>=e.length&&e.push(l.HY.empty),n[r]<o){const s=p(t).cell.createAndFill(),i=[];for(let t=n[r];t<o;t++)i.push(s);e[r]=e[r].append(l.HY.from(i))}return{height:e.length,width:o,rows:e}}(i,a)}function E(t,e){const n=t.createAndFill();return new d.wx(n).replace(0,n.content.size,e).doc}function x(t,e,n,o,r,s,i,l){if(0==i||i==e.height)return!1;let a=!1;for(let c=r;c<s;c++){const r=i*e.width+c,s=e.map[r];if(e.map[r-e.width]==s){a=!0;const r=n.nodeAt(s),{top:d,left:u}=e.findCell(s);t.setNodeMarkup(t.mapping.slice(l).map(s+o),null,{...r.attrs,rowspan:i-d}),t.insert(t.mapping.slice(l).map(e.positionAt(i,u,n)),r.type.createAndFill({...r.attrs,rowspan:d+r.attrs.rowspan-i})),c+=r.attrs.colspan-1}}return a}function R(t,e,n,o,r,s,i,l){if(0==i||i==e.width)return!1;let a=!1;for(let c=r;c<s;c++){const r=c*e.width+i,s=e.map[r];if(e.map[r-1]==s){a=!0;const r=n.nodeAt(s),d=e.colCount(s),u=t.mapping.slice(l).map(s+o);t.setNodeMarkup(u,null,C(r.attrs,i-d,r.attrs.colspan-(i-d))),t.insert(u+r.nodeSize,r.type.createAndFill(C(r.attrs,0,i-d))),c+=r.attrs.rowspan-1}}return a}function N(t,e,n,o,r){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let i=u.get(s);const{top:a,left:c}=o,d=c+r.width,h=a+r.height,f=t.tr;let m=0;function g(){if(s=n?f.doc.nodeAt(n-1):f.doc,!s)throw new Error("No table found");i=u.get(s),m=f.mapping.maps.length}(function(t,e,n,o,r,s,i){const a=p(t.doc.type.schema);let c,d;if(r>e.width)for(let l=0,u=0;l<e.height;l++){const s=n.child(l);u+=s.nodeSize;const h=[];let p;p=null==s.lastChild||s.lastChild.type==a.cell?c||(c=a.cell.createAndFill()):d||(d=a.header_cell.createAndFill());for(let t=e.width;t<r;t++)h.push(p);t.insert(t.mapping.slice(i).map(u-1+o),h)}if(s>e.height){const u=[];for(let t=0,o=(e.height-1)*e.width;t<Math.max(e.width,r);t++){const r=!(t>=e.width)&&n.nodeAt(e.map[o+t]).type==a.header_cell;u.push(r?d||(d=a.header_cell.createAndFill()):c||(c=a.cell.createAndFill()))}const h=a.row.create(null,l.HY.from(u)),p=[];for(let t=e.height;t<s;t++)p.push(h);t.insert(t.mapping.slice(i).map(o+n.nodeSize-2),p)}return!(!c&&!d)})(f,i,s,n,d,h,m)&&g(),x(f,i,s,n,c,d,a,m)&&g(),x(f,i,s,n,c,d,h,m)&&g(),R(f,i,s,n,a,h,c,m)&&g(),R(f,i,s,n,a,h,d,m)&&g();for(let u=a;u<h;u++){const t=i.positionAt(u,c,s),e=i.positionAt(u,d,s);f.replace(f.mapping.slice(m).map(t+n),f.mapping.slice(m).map(e+n),new l.p2(r.rows[u-a],0,0))}g(),f.setSelection(new M(f.doc.resolve(n+i.positionAt(a,c,s)),f.doc.resolve(n+i.positionAt(h-1,d-1,s)))),e(f)}var O=(0,c.$)({ArrowLeft:P("horiz",-1),ArrowRight:P("horiz",1),ArrowUp:P("vert",-1),ArrowDown:P("vert",1),"Shift-ArrowLeft":I("horiz",-1),"Shift-ArrowRight":I("horiz",1),"Shift-ArrowUp":I("vert",-1),"Shift-ArrowDown":I("vert",1),Backspace:B,"Mod-Backspace":B,Delete:B,"Mod-Delete":B});function $(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function P(t,e){return(n,o,r)=>{if(!r)return!1;const s=n.selection;if(s instanceof M)return $(n,o,i.Y1.near(s.$headCell,e));if("horiz"!=t&&!s.empty)return!1;const l=K(r,t,e);if(null==l)return!1;if("horiz"==t)return $(n,o,i.Y1.near(n.doc.resolve(s.head+e),e));{const r=n.doc.resolve(l),s=v(r,t,e);let a;return a=s?i.Y1.near(s,1):e<0?i.Y1.near(n.doc.resolve(r.before(-1)),-1):i.Y1.near(n.doc.resolve(r.after(-1)),1),$(n,o,a)}}}function I(t,e){return(n,o,r)=>{if(!r)return!1;const s=n.selection;let i;if(s instanceof M)i=s;else{const o=K(r,t,e);if(null==o)return!1;i=new M(n.doc.resolve(o))}const l=v(i.$headCell,t,e);return!!l&&$(n,o,new M(i.$anchorCell,l))}}function B(t,e){const n=t.selection;if(!(n instanceof M))return!1;if(e){const o=t.tr,r=p(t.schema).cell.createAndFill().content;n.forEachCell(((t,e)=>{t.content.eq(r)||o.replace(o.mapping.map(e+1),o.mapping.map(e+t.nodeSize-1),new l.p2(r,0,0))})),o.docChanged&&e(o)}return!0}function z(t,e){const n=m(t.state.doc.resolve(e));return!!n&&(t.dispatch(t.state.tr.setSelection(new M(n))),!0)}function D(t,e,n){if(!g(t.state))return!1;let o=H(n);const r=t.state.selection;if(r instanceof M){o||(o={width:1,height:1,rows:[l.HY.from(E(p(t.state.schema).cell,n))]});const e=r.$anchorCell.node(-1),s=r.$anchorCell.start(-1),i=u.get(e).rectBetween(r.$anchorCell.pos-s,r.$headCell.pos-s);return o=function({width:t,height:e,rows:n},o,r){if(t!=o){const e=[],r=[];for(let t=0;t<n.length;t++){const s=n[t],i=[];for(let n=e[t]||0,r=0;n<o;r++){let l=s.child(r%s.childCount);n+l.attrs.colspan>o&&(l=l.type.createChecked(C(l.attrs,l.attrs.colspan,n+l.attrs.colspan-o),l.content)),i.push(l),n+=l.attrs.colspan;for(let n=1;n<l.attrs.rowspan;n++)e[t+n]=(e[t+n]||0)+l.attrs.colspan}r.push(l.HY.from(i))}n=r,t=o}if(e!=r){const t=[];for(let o=0,s=0;o<r;o++,s++){const i=[],a=n[s%e];for(let t=0;t<a.childCount;t++){let e=a.child(t);o+e.attrs.rowspan>r&&(e=e.type.create({...e.attrs,rowspan:Math.max(1,r-e.attrs.rowspan)},e.content)),i.push(e)}t.push(l.HY.from(i))}n=t,e=r}return{width:t,height:e,rows:n}}(o,i.right-i.left,i.bottom-i.top),N(t.state,t.dispatch,s,i,o),!0}if(o){const e=b(t.state),n=e.start(-1);return N(t.state,t.dispatch,n,u.get(e.node(-1)).findCell(e.pos-n),o),!0}return!1}function j(t,e){var n;if(e.ctrlKey||e.metaKey)return;const o=W(t,e.target);let r;if(e.shiftKey&&t.state.selection instanceof M)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&o&&null!=(r=m(t.state.selection.$anchor))&&(null==(n=F(t,e))?void 0:n.pos)!=r.pos)s(r,e),e.preventDefault();else if(!o)return;function s(e,n){let o=F(t,n);const r=null==f.getState(t.state);if(!o||!y(e,o)){if(!r)return;o=e}const s=new M(e,o);if(r||!t.state.selection.eq(s)){const n=t.state.tr.setSelection(s);r&&n.setMeta(f,e.pos),t.dispatch(n)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",l),null!=f.getState(t.state)&&t.dispatch(t.state.tr.setMeta(f,-1))}function l(n){const r=n,l=f.getState(t.state);let a;if(null!=l)a=t.state.doc.resolve(l);else if(W(t,r.target)!=o&&(a=F(t,e),!a))return i();a&&s(a,r)}t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",l)}function K(t,e,n){if(!(t.state.selection instanceof i.Bs))return null;const{$head:o}=t.state.selection;for(let r=o.depth-1;r>=0;r--){const s=o.node(r);if((n<0?o.index(r):o.indexAfter(r))!=(n<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){const s=o.before(r),i="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(i)?s:null}}return null}function W(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e;return null}function F(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?m(t.state.doc.resolve(n.pos)):null}var Y=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),q(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type==this.node.type&&(this.node=t,q(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))}};function q(t,e,n,o,r,s){var i;let l=0,a=!0,c=e.firstChild;const d=t.firstChild;if(d){for(let t=0,n=0;t<d.childCount;t++){const{colspan:i,colwidth:u}=d.child(t).attrs;for(let t=0;t<i;t++,n++){const i=r==n?s:u&&u[t],d=i?i+"px":"";l+=i||o,i||(a=!1),c?(c.style.width!=d&&(c.style.width=d),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=d}}for(;c;){const t=c.nextSibling;null==(i=c.parentNode)||i.removeChild(c),c=t}a?(n.style.width=l+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=l+"px")}}var V=new i.H$("tableColumnResizing");function U({handleWidth:t=5,cellMinWidth:e=25,View:n=Y,lastColumnResizable:o=!0}={}){const r=new i.Sy({key:V,state:{init:(t,o)=>(r.spec.props.nodeViews[p(o.schema).table.name]=(t,o)=>new n(t,e,o),new G(-1,!1)),apply:(t,e)=>e.apply(t)},props:{attributes:t=>{const e=V.getState(t);return e&&e.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(e,n)=>{!function(t,e,n,o,r){const s=V.getState(t.state);if(!s)return;if(!s.dragging){const o=function(t){for(;t&&"TD"!=t.nodeName&&"TH"!=t.nodeName;)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}(e.target);let i=-1;if(o){const{left:r,right:s}=o.getBoundingClientRect();e.clientX-r<=n?i=Q(t,e,"left"):s-e.clientX<=n&&(i=Q(t,e,"right"))}if(i!=s.activeHandle){if(!r&&-1!==i){const e=t.state.doc.resolve(i),n=e.node(-1),o=u.get(n),r=e.start(-1);if(o.colCount(e.pos-r)+e.nodeAfter.attrs.colspan-1==o.width-1)return}J(t,i)}}}(e,n,t,0,o)},mouseleave:t=>{!function(t){const e=V.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&J(t,-1)}(t)},mousedown:(t,n)=>{!function(t,e,n){const o=V.getState(t.state);if(!o||-1==o.activeHandle||o.dragging)return!1;const r=t.state.doc.nodeAt(o.activeHandle),s=function(t,e,{colspan:n,colwidth:o}){const r=o&&o[o.length-1];if(r)return r;const s=t.domAtPos(e);let i=s.node.childNodes[s.offset].offsetWidth,l=n;if(o)for(let a=0;a<n;a++)o[a]&&(i-=o[a],l--);return i/l}(t,o.activeHandle,r.attrs);function i(e){window.removeEventListener("mouseup",i),window.removeEventListener("mousemove",l);const o=V.getState(t.state);(null==o?void 0:o.dragging)&&(!function(t,e,n){const o=t.state.doc.resolve(e),r=o.node(-1),s=u.get(r),i=o.start(-1),l=s.colCount(o.pos-i)+o.nodeAfter.attrs.colspan-1,a=t.state.tr;for(let c=0;c<s.height;c++){const t=c*s.width+l;if(c&&s.map[t]==s.map[t-s.width])continue;const e=s.map[t],o=r.nodeAt(e).attrs,d=1==o.colspan?0:l-s.colCount(e);if(o.colwidth&&o.colwidth[d]==n)continue;const u=o.colwidth?o.colwidth.slice():Z(o.colspan);u[d]=n,a.setNodeMarkup(i+e,null,{...o,colwidth:u})}a.docChanged&&t.dispatch(a)}(t,o.activeHandle,X(o.dragging,e,n)),t.dispatch(t.state.tr.setMeta(V,{setDragging:null})))}function l(e){if(!e.which)return i(e);const o=V.getState(t.state);if(o&&o.dragging){const r=X(o.dragging,e,n);!function(t,e,n,o){const r=t.state.doc.resolve(e),s=r.node(-1),i=r.start(-1),l=u.get(s).colCount(r.pos-i)+r.nodeAfter.attrs.colspan-1;let a=t.domAtPos(r.start(-1)).node;for(;a&&"TABLE"!=a.nodeName;)a=a.parentNode;if(!a)return;q(s,a.firstChild,a,o,l,n)}(t,o.activeHandle,r,n)}}t.dispatch(t.state.tr.setMeta(V,{setDragging:{startX:e.clientX,startWidth:s}})),window.addEventListener("mouseup",i),window.addEventListener("mousemove",l),e.preventDefault()}(t,n,e)}},decorations:t=>{const e=V.getState(t);if(e&&e.activeHandle>-1)return function(t,e){const n=[],o=t.doc.resolve(e),r=o.node(-1);if(!r)return a.EH.empty;const s=u.get(r),i=o.start(-1),l=s.colCount(o.pos-i)+o.nodeAfter.attrs.colspan;for(let c=0;c<s.height;c++){const t=l+c*s.width-1;if((l==s.width||s.map[t]!=s.map[t+1])&&(0==c||s.map[t-1]!=s.map[t-1-s.width])){const e=s.map[t],o=i+e+r.nodeAt(e).nodeSize-1,l=document.createElement("div");l.className="column-resize-handle",n.push(a.p.widget(o,l))}}return a.EH.create(t.doc,n)}(t,e.activeHandle)},nodeViews:{}}});return r}var G=class{constructor(t,e){this.activeHandle=t,this.dragging=e}apply(t){const e=this,n=t.getMeta(V);if(n&&null!=n.setHandle)return new G(n.setHandle,!1);if(n&&void 0!==n.setDragging)return new G(e.activeHandle,n.setDragging);if(e.activeHandle>-1&&t.docChanged){let n=t.mapping.map(e.activeHandle,-1);return w(t.doc.resolve(n))||(n=-1),new G(n,e.dragging)}return e}};function Q(t,e,n){const o=t.posAtCoords({left:e.clientX,top:e.clientY});if(!o)return-1;const{pos:r}=o,s=m(t.state.doc.resolve(r));if(!s)return-1;if("right"==n)return s.pos;const i=u.get(s.node(-1)),l=s.start(-1),a=i.map.indexOf(s.pos-l);return a%i.width==0?-1:l+i.map[a-1]}function X(t,e,n){const o=e.clientX-t.startX;return Math.max(n,t.startWidth+o)}function J(t,e){t.dispatch(t.state.tr.setMeta(V,{setHandle:e}))}function Z(t){return Array(t).fill(0)}function tt(t){const e=t.selection,n=b(t),o=n.node(-1),r=n.start(-1),s=u.get(o);return{...e instanceof M?s.rectBetween(e.$anchorCell.pos-r,e.$headCell.pos-r):s.findCell(n.pos-r),tableStart:r,map:s,table:o}}function et(t,{map:e,tableStart:n,table:o},r){let s=r>0?-1:0;(function(t,e,n){const o=p(e.type.schema).header_cell;for(let r=0;r<t.height;r++)if(e.nodeAt(t.map[n+r*t.width]).type!=o)return!1;return!0})(e,o,r+s)&&(s=0==r||r==e.width?null:0);for(let i=0;i<e.height;i++){const l=i*e.width+r;if(r>0&&r<e.width&&e.map[l-1]==e.map[l]){const s=e.map[l],a=o.nodeAt(s);t.setNodeMarkup(t.mapping.map(n+s),null,k(a.attrs,r-e.colCount(s))),i+=a.attrs.rowspan-1}else{const a=null==s?p(o.type.schema).cell:o.nodeAt(e.map[l+s]).type,c=e.positionAt(i,r,o);t.insert(t.mapping.map(n+c),a.createAndFill())}}return t}function nt(t,{map:e,table:n,tableStart:o},r){const s=t.mapping.maps.length;for(let i=0;i<e.height;){const l=i*e.width+r,a=e.map[l],c=n.nodeAt(a),d=c.attrs;if(r>0&&e.map[l-1]==a||r<e.width-1&&e.map[l+1]==a)t.setNodeMarkup(t.mapping.slice(s).map(o+a),null,C(d,r-e.colCount(a)));else{const e=t.mapping.slice(s).map(o+a);t.delete(e,e+c.nodeSize)}i+=d.rowspan}}function ot(t,{map:e,tableStart:n,table:o},r){var s;let i=n;for(let c=0;c<r;c++)i+=o.child(c).nodeSize;const l=[];let a=r>0?-1:0;(function(t,e,n){var o;const r=p(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if((null==(o=e.nodeAt(t.map[s+n*t.width]))?void 0:o.type)!=r)return!1;return!0})(e,o,r+a)&&(a=0==r||r==e.height?null:0);for(let c=0,d=e.width*r;c<e.width;c++,d++)if(r>0&&r<e.height&&e.map[d]==e.map[d-e.width]){const r=e.map[d],s=o.nodeAt(r).attrs;t.setNodeMarkup(n+r,null,{...s,rowspan:s.rowspan+1}),c+=s.colspan-1}else{const t=null==a?p(o.type.schema).cell:null==(s=o.nodeAt(e.map[d+a*e.width]))?void 0:s.type,n=null==t?void 0:t.createAndFill();n&&l.push(n)}return t.insert(i,p(o.type.schema).row.create(null,l)),t}function rt(t,{map:e,table:n,tableStart:o},r){let s=0;for(let a=0;a<r;a++)s+=n.child(a).nodeSize;const i=s+n.child(r).nodeSize,l=t.mapping.maps.length;t.delete(s+o,i+o);for(let a=0,c=r*e.width;a<e.width;a++,c++){const s=e.map[c];if(r>0&&s==e.map[c-e.width]){const e=n.nodeAt(s).attrs;t.setNodeMarkup(t.mapping.slice(l).map(s+o),null,{...e,rowspan:e.rowspan-1}),a+=e.colspan-1}else if(r<e.width&&s==e.map[c+e.width]){const i=n.nodeAt(s),c=i.attrs,d=i.type.create({...c,rowspan:i.attrs.rowspan-1},i.content),u=e.positionAt(r+1,a,n);t.insert(t.mapping.slice(l).map(o+u),d),a+=c.colspan-1}}}function st(t){const e=t.content;return 1==e.childCount&&e.child(0).isTextblock&&0==e.child(0).childCount}function it(t,e){const n=t.selection;if(!(n instanceof M)||n.$anchorCell.pos==n.$headCell.pos)return!1;const o=tt(t),{map:r}=o;if(function({width:t,height:e,map:n},o){let r=o.top*t+o.left,s=r,i=(o.bottom-1)*t+o.left,l=r+(o.right-o.left-1);for(let a=o.top;a<o.bottom;a++){if(o.left>0&&n[s]==n[s-1]||o.right<t&&n[l]==n[l+1])return!0;s+=t,l+=t}for(let a=o.left;a<o.right;a++){if(o.top>0&&n[r]==n[r-t]||o.bottom<e&&n[i]==n[i+t])return!0;r++,i++}return!1}(r,o))return!1;if(e){const n=t.tr,s={};let i,a,c=l.HY.empty;for(let t=o.top;t<o.bottom;t++)for(let e=o.left;e<o.right;e++){const l=r.map[t*r.width+e],d=o.table.nodeAt(l);if(!s[l]&&d)if(s[l]=!0,null==i)i=l,a=d;else{st(d)||(c=c.append(d.content));const t=n.mapping.map(l+o.tableStart);n.delete(t,t+d.nodeSize)}}if(null==i||null==a)return!0;if(n.setNodeMarkup(i+o.tableStart,null,{...k(a.attrs,a.attrs.colspan,o.right-o.left-a.attrs.colspan),rowspan:o.bottom-o.top}),c.size){const t=i+1+a.content.size,e=st(a)?i+1:t;n.replaceWith(e+o.tableStart,t+o.tableStart,c)}n.setSelection(new M(n.doc.resolve(i+o.tableStart))),e(n)}return!0}function lt(t,e){const n=p(t.schema);return(o=({node:t})=>n[t.type.spec.tableRole],(t,e)=>{var n;const r=t.selection;let s,i;if(r instanceof M){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;s=r.$anchorCell.nodeAfter,i=r.$anchorCell.pos}else{if(s=function(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}(r.$from),!s)return!1;i=null==(n=m(r.$from))?void 0:n.pos}if(null==s||null==i)return!1;if(1==s.attrs.colspan&&1==s.attrs.rowspan)return!1;if(e){let n=s.attrs;const l=[],a=n.colwidth;n.rowspan>1&&(n={...n,rowspan:1}),n.colspan>1&&(n={...n,colspan:1});const c=tt(t),d=t.tr;for(let t=0;t<c.right-c.left;t++)l.push(a?{...n,colwidth:a&&a[t]?[a[t]]:null}:n);let u;for(let t=c.top;t<c.bottom;t++){let e=c.map.positionAt(t,c.left,c.table);t==c.top&&(e+=s.nodeSize);for(let n=c.left,r=0;n<c.right;n++,r++)n==c.left&&t==c.top||d.insert(u=d.mapping.map(e+c.tableStart,1),o({node:s,row:t,col:n}).createAndFill(l[r]))}d.setNodeMarkup(i,o({node:s,row:c.top,col:c.left}),l[0]),r instanceof M&&d.setSelection(new M(d.doc.resolve(r.$anchorCell.pos),u?d.doc.resolve(u):void 0)),e(d)}return!0})(t,e);var o}function at(t,e,n){const o=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1});for(let r=0;r<o.length;r++){const t=e.table.nodeAt(o[r]);if(t&&t.type!==n.header_cell)return!1}return!0}function ct(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,n){if(!g(e))return!1;if(n){const o=p(e.schema),r=tt(e),s=e.tr,i=r.map.cellsInRect("column"==t?{left:r.left,top:0,right:r.right,bottom:r.map.height}:"row"==t?{left:0,top:r.top,right:r.map.width,bottom:r.bottom}:r),l=i.map((t=>r.table.nodeAt(t)));for(let t=0;t<i.length;t++)l[t].type==o.header_cell&&s.setNodeMarkup(r.tableStart+i[t],o.cell,l[t].attrs);if(0==s.steps.length)for(let t=0;t<i.length;t++)s.setNodeMarkup(r.tableStart+i[t],o.header_cell,l[t].attrs);n(s)}return!0}}(t):function(e,n){if(!g(e))return!1;if(n){const o=p(e.schema),r=tt(e),s=e.tr,i=at("row",r,o),l=at("column",r,o),a=("column"===t?i:"row"===t&&l)?1:0,c="column"==t?{left:0,top:a,right:1,bottom:r.map.height}:"row"==t?{left:a,top:0,right:r.map.width,bottom:1}:r,d="column"==t?l?o.cell:o.header_cell:"row"==t?i?o.cell:o.header_cell:o.cell;r.map.cellsInRect(c).forEach((t=>{const e=t+r.tableStart,n=s.doc.nodeAt(e);n&&s.setNodeMarkup(e,d,n.attrs)})),n(s)}return!0}}ct("row",{useDeprecatedLogic:!0}),ct("column",{useDeprecatedLogic:!0});var dt=ct("cell",{useDeprecatedLogic:!0});function ut(t){return function(e,n){if(!g(e))return!1;const o=function(t,e){if(e<0){const e=t.nodeBefore;if(e)return t.pos-e.nodeSize;for(let n=t.index(-1)-1,o=t.before();n>=0;n--){const e=t.node(-1).child(n),r=e.lastChild;if(r)return o-1-r.nodeSize;o-=e.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const e=t.node(-1);for(let n=t.indexAfter(-1),o=t.after();n<e.childCount;n++){const t=e.child(n);if(t.childCount)return o+1;o+=t.nodeSize}}return null}(b(e),t);if(null==o)return!1;if(n){const t=e.doc.resolve(o);n(e.tr.setSelection(i.Bs.between(t,(r=t,r.node(0).resolve(r.pos+r.nodeAfter.nodeSize)))).scrollIntoView())}var r;return!0}}function ht({allowTableNodeSelection:t=!1}={}){return new i.Sy({key:f,state:{init:()=>null,apply(t,e){const n=t.getMeta(f);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;const{deleted:o,pos:r}=t.mapping.mapResult(e);return o?null:r}},props:{decorations:A,handleDOMEvents:{mousedown:j},createSelectionBetween:t=>null!=f.getState(t.state)?t.state.selection:null,handleTripleClick:z,handleKeyDown:O,handlePaste:D},appendTransaction:(e,n,o)=>function(t,e,n){const o=(e||t).selection,r=(e||t).doc;let s,l;if(o instanceof i.qv&&(l=o.node.type.spec.tableRole)){if("cell"==l||"header_cell"==l)s=M.create(r,o.from);else if("row"==l){const t=r.resolve(o.from+1);s=M.rowSelection(t,t)}else if(!n){const t=u.get(o.node),e=o.from+1,n=e+t.map[t.width*t.height-1];s=M.create(r,e+1,n)}}else o instanceof i.Bs&&function({$from:t,$to:e}){if(t.pos==e.pos||t.pos<t.pos-6)return!1;let n=t.pos,o=e.pos,r=t.depth;for(;r>=0&&!(t.after(r+1)<t.end(r));r--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,o--);return n==o&&/row|table/.test(t.node(r).type.spec.tableRole)}(o)?s=i.Bs.create(r,o.from):o instanceof i.Bs&&function({$from:t,$to:e}){let n,o;for(let r=t.depth;r>0;r--){const e=t.node(r);if("cell"===e.type.spec.tableRole||"header_cell"===e.type.spec.tableRole){n=e;break}}for(let r=e.depth;r>0;r--){const t=e.node(r);if("cell"===t.type.spec.tableRole||"header_cell"===t.type.spec.tableRole){o=t;break}}return n!==o&&0===e.parentOffset}(o)&&(s=i.Bs.create(r,o.$from.start(),o.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}(o,L(o,n),t)})}function pt(t,e,n,o,r,s){let i=0,l=!0,a=e.firstChild;const c=t.firstChild;for(let d=0,u=0;d<c.childCount;d+=1){const{colspan:t,colwidth:n}=c.child(d).attrs;for(let c=0;c<t;c+=1,u+=1){const t=r===u?s:n&&n[c],d=t?`${t}px`:"";i+=t||o,t||(l=!1),a?(a.style.width!==d&&(a.style.width=d),a=a.nextSibling):e.appendChild(document.createElement("col")).style.width=d}}for(;a;){const t=a.nextSibling;a.parentNode.removeChild(a),a=t}l?(n.style.width=`${i}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${i}px`)}class ft{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),pt(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type===this.node.type&&(this.node=t,pt(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return"attributes"===t.type&&(t.target===this.table||this.colgroup.contains(t.target))}}function mt(t,e){return e?t.createChecked(null,e):t.createAndFill()}function gt(t,e,n,o,r){const s=function(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach((n=>{const o=t.nodes[n];o.spec.tableRole&&(e[o.spec.tableRole]=o)})),t.cached.tableNodeTypes=e,e}(t),i=[],l=[];for(let c=0;c<n;c+=1){const t=mt(s.cell,r);if(t&&l.push(t),o){const t=mt(s.header_cell,r);t&&i.push(t)}}const a=[];for(let c=0;c<e;c+=1)a.push(s.row.createChecked(null,o&&0===c?i:l));return s.table.createChecked(null,a)}const bt=({editor:t})=>{const{selection:e}=t.state;if(!(e instanceof M))return!1;let n=0;const o=(0,s.qv)(e.ranges[0].$from,(t=>"table"===t.type.name));null===o||void 0===o||o.node.descendants((t=>{if("table"===t.type.name)return!1;["tableCell","tableHeader"].includes(t.type.name)&&(n+=1)}));return n===e.ranges.length&&(t.commands.deleteTable(),!0)},wt=s.NB.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:ft,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({HTMLAttributes:t}){return["table",(0,s.P1)(this.options.HTMLAttributes,t),["tbody",0]]},addCommands:()=>({insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:o,dispatch:r,editor:s})=>{const l=gt(s.schema,t,e,n);if(r){const t=o.selection.anchor+1;o.replaceSelectionWith(l).scrollIntoView().setSelection(i.Bs.near(o.doc.resolve(t)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>function(t,e){if(!g(t))return!1;if(e){const n=tt(t);e(et(t.tr,n,n.left))}return!0}(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>function(t,e){if(!g(t))return!1;if(e){const n=tt(t);e(et(t.tr,n,n.right))}return!0}(t,e),deleteColumn:()=>({state:t,dispatch:e})=>function(t,e){if(!g(t))return!1;if(e){const n=tt(t),o=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let t=n.right-1;nt(o,n,t),t!=n.left;t--){const t=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc;if(!t)throw RangeError("No table found");n.table=t,n.map=u.get(t)}e(o)}return!0}(t,e),addRowBefore:()=>({state:t,dispatch:e})=>function(t,e){if(!g(t))return!1;if(e){const n=tt(t);e(ot(t.tr,n,n.top))}return!0}(t,e),addRowAfter:()=>({state:t,dispatch:e})=>function(t,e){if(!g(t))return!1;if(e){const n=tt(t);e(ot(t.tr,n,n.bottom))}return!0}(t,e),deleteRow:()=>({state:t,dispatch:e})=>function(t,e){if(!g(t))return!1;if(e){const n=tt(t),o=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let t=n.bottom-1;rt(o,n,t),t!=n.top;t--){const t=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc;if(!t)throw RangeError("No table found");n.table=t,n.map=u.get(n.table)}e(o)}return!0}(t,e),deleteTable:()=>({state:t,dispatch:e})=>function(t,e){const n=t.selection.$anchor;for(let o=n.depth;o>0;o--)if("table"==n.node(o).type.spec.tableRole)return e&&e(t.tr.delete(n.before(o),n.after(o)).scrollIntoView()),!0;return!1}(t,e),mergeCells:()=>({state:t,dispatch:e})=>it(t,e),splitCell:()=>({state:t,dispatch:e})=>lt(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>ct("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>ct("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>dt(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>!!it(t,e)||lt(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:o})=>function(t,e){return function(n,o){if(!g(n))return!1;const r=b(n);if(r.nodeAfter.attrs[t]===e)return!1;if(o){const s=n.tr;n.selection instanceof M?n.selection.forEachCell(((n,o)=>{n.attrs[t]!==e&&s.setNodeMarkup(o,null,{...n.attrs,[t]:e})})):s.setNodeMarkup(r.pos,null,{...r.nodeAfter.attrs,[t]:e}),o(s)}return!0}}(t,e)(n,o),goToNextCell:()=>({state:t,dispatch:e})=>ut(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>ut(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&L(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const n=M.create(e.doc,t.anchorCell,t.headCell);e.setSelection(n)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:bt,"Mod-Backspace":bt,Delete:bt,"Mod-Delete":bt}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[U({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],ht({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:(0,s.nU)((0,s.Nl)(t,"tableRole",e))}}})},1284:function(t,e,n){n.d(e,{kg:function(){return c},jE:function(){return h}});var o=n(7294),r=n(2752),s=n(3935);class i extends r.ML{constructor(){super(...arguments),this.contentComponent=null}}const l=({renderers:t})=>o.createElement(o.Fragment,null,Object.entries(t).map((([t,e])=>s.createPortal(e.reactElement,e.element,t))));class a extends o.Component{constructor(t){super(t),this.editorContentRef=o.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:t}=this.props;if(t&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(...t.options.element.childNodes),t.setOptions({element:e}),t.contentComponent=this,t.createNodeViews(),this.initialized=!0}}maybeFlushSync(t){this.initialized?queueMicrotask((()=>{(0,s.flushSync)(t)})):t()}setRenderer(t,e){this.maybeFlushSync((()=>{this.setState((({renderers:n})=>({renderers:{...n,[t]:e}})))}))}removeRenderer(t){this.maybeFlushSync((()=>{this.setState((({renderers:e})=>{const n={...e};return delete n[t],{renderers:n}}))}))}componentWillUnmount(){const{editor:t}=this.props;if(!t)return;if(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),t.contentComponent=null,!t.options.element.firstChild)return;const e=document.createElement("div");e.append(...t.options.element.childNodes),t.setOptions({element:e})}render(){const{editor:t,...e}=this.props;return o.createElement(o.Fragment,null,o.createElement("div",{ref:this.editorContentRef,...e}),o.createElement(l,{renderers:this.state.renderers}))}}const c=o.memo(a),d=(0,o.createContext)({onDragStart:void 0}),u=()=>(0,o.useContext)(d);o.forwardRef(((t,e)=>{const{onDragStart:n}=u(),r=t.as||"div";return o.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})}));const h=(t={},e=[])=>{const[n,r]=(0,o.useState)(null),s=function(){const[,t]=(0,o.useState)(0);return()=>t((t=>t+1))}();return(0,o.useEffect)((()=>{let e=!0;const n=new i(t);return r(n),n.on("transaction",(()=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>{e&&s()}))}))})),()=>{n.destroy(),e=!1}}),e),n}},8422:function(t,e,n){n.d(e,{Z:function(){return Mt}});var o=n(2752);const r=/^\s*>\s$/,s=o.NB.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:t}){return["blockquote",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,o.S0)({find:r,type:this.type})]}}),i=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,l=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,a=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,c=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,d=o.vc.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],renderHTML({HTMLAttributes:t}){return["strong",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,o.Cf)({find:i,type:this.type}),(0,o.Cf)({find:a,type:this.type})]},addPasteRules(){return[(0,o.K9)({find:l,type:this.type}),(0,o.K9)({find:c,type:this.type})]}}),u=o.NB.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",(0,o.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),h=o.vc.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:t=>!!t.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:t}){return["span",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=(0,o.Jo)(t,this.type);return!!Object.entries(n).some((([,t])=>!!t))||e.unsetMark(this.name)}}}}),p=/^\s*([-+*])\s$/,f=o.NB.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:t}){return["ul",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(u.name,this.editor.getAttributes(h.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=(0,o.S0)({find:p,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=(0,o.S0)({find:p,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(h.name),editor:this.editor})),[t]}}),m=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,g=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,b=o.vc.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:t}){return["code",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,o.Cf)({find:m,type:this.type})]},addPasteRules(){return[(0,o.K9)({find:g,type:this.type})]}});var w=n(2376);const y=/^```([a-z]+)?[\s\n]$/,v=/^~~~([a-z]+)?[\s\n]$/,C=o.NB.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...(null===(e=t.firstElementChild)||void 0===e?void 0:e.classList)||[]].filter((t=>t.startsWith(n))).map((t=>t.replace(n,"")))[0];return o||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:t,HTMLAttributes:e}){return["pre",(0,o.P1)(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=1===e.pos;return!(!t||e.parent.type.name!==this.name)&&(!(!n&&e.parent.textContent.length)&&this.editor.commands.clearNodes())},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:o,empty:r}=n;if(!r||o.parent.type!==this.type)return!1;const s=o.parentOffset===o.parent.nodeSize-2,i=o.parent.textContent.endsWith("\n\n");return!(!s||!i)&&t.chain().command((({tr:t})=>(t.delete(o.pos-2,o.pos),!0))).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:o}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;if(!(r.parentOffset===r.parent.nodeSize-2))return!1;const i=r.after();if(void 0===i)return!1;return!o.nodeAt(i)&&t.commands.exitCode()}}},addInputRules(){return[(0,o.zK)({find:y,type:this.type,getAttributes:t=>({language:t[1]})}),(0,o.zK)({find:v,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new w.Sy({key:new w.H$("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),o=e.clipboardData.getData("vscode-editor-data"),r=o?JSON.parse(o):void 0,s=null===r||void 0===r?void 0:r.mode;if(!n||!s)return!1;const{tr:i}=t.state;return i.replaceSelectionWith(this.type.create({language:s})),i.setSelection(w.Bs.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.insertText(n.replace(/\r\n?/g,"\n")),i.setMeta("paste",!0),t.dispatch(i),!0}}})]}}),k=o.NB.create({name:"doc",topNode:!0,content:"block+"});var M=n(6560);function _(t={}){return new w.Sy({view:e=>new A(e,t)})}class A{constructor(t,e){this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map((e=>{let n=t=>{this[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}}))}destroy(){this.handlers.forEach((({name:t,handler:e})=>this.editorView.dom.removeEventListener(t,e)))}update(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t,e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent;if(n){let n=e.nodeBefore,o=e.nodeAfter;if(n||o){let e=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(e){let r=e.getBoundingClientRect(),s=n?r.bottom:r.top;n&&o&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:r.left,right:r.right,top:s-this.width/2,bottom:s+this.width/2}}}}if(!t){let e=this.editorView.coordsAtPos(this.cursorPos);t={left:e.left-this.width/2,right:e.left+this.width/2,top:e.top,bottom:e.bottom}}let o,r,s=this.editorView.dom.offsetParent;if(this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!s||s==document.body&&"static"==getComputedStyle(s).position)o=-pageXOffset,r=-pageYOffset;else{let t=s.getBoundingClientRect();o=t.left-s.scrollLeft,r=t.top-s.scrollTop}this.element.style.left=t.left-o+"px",this.element.style.top=t.top-r+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),t)}dragover(t){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),o=n&&n.type.spec.disableDropCursor,r="function"==typeof o?o(this.editorView,e,t):o;if(e&&!r){let t=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let e=(0,M.nj)(this.editorView.state.doc,t,this.editorView.dragging.slice);null!=e&&(t=e)}this.setCursor(t),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const S=o.hj.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[_(this.options)]}});var T=n(3225),L=n(2806),H=n(4348);class E extends w.Y1{constructor(t){super(t,t)}map(t,e){let n=t.resolve(e.map(this.head));return E.valid(n)?new E(n):w.Y1.near(n)}content(){return L.p2.empty}eq(t){return t instanceof E&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new E(t.resolve(e.pos))}getBookmark(){return new x(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!function(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),o=t.node(e);if(0!=n)for(let t=o.child(n-1);;t=t.lastChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(o.type.spec.isolating)return!0}return!0}(t)||!function(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),o=t.node(e);if(n!=o.childCount)for(let t=o.child(n);;t=t.firstChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(o.type.spec.isolating)return!0}return!0}(t))return!1;let n=e.type.spec.allowGapCursor;if(null!=n)return n;let o=e.contentMatchAt(t.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(t,e,n=!1){t:for(;;){if(!n&&E.valid(t))return t;let o=t.pos,r=null;for(let n=t.depth;;n--){let s=t.node(n);if(e>0?t.indexAfter(n)<s.childCount:t.index(n)>0){r=s.child(e>0?t.indexAfter(n):t.index(n)-1);break}if(0==n)return null;o+=e;let i=t.doc.resolve(o);if(E.valid(i))return i}for(;;){let s=e>0?r.firstChild:r.lastChild;if(!s){if(r.isAtom&&!r.isText&&!w.qv.isSelectable(r)){t=t.doc.resolve(o+r.nodeSize*e),n=!1;continue t}break}r=s,o+=e;let i=t.doc.resolve(o);if(E.valid(i))return i}return null}}}E.prototype.visible=!1,E.findFrom=E.findGapCursorFrom,w.Y1.jsonID("gapcursor",E);class x{constructor(t){this.pos=t}map(t){return new x(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return E.valid(e)?new E(e):w.Y1.near(e)}}const R=(0,T.$)({ArrowLeft:N("horiz",-1),ArrowRight:N("horiz",1),ArrowUp:N("vert",-1),ArrowDown:N("vert",1)});function N(t,e){const n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,o,r){let s=t.selection,i=e>0?s.$to:s.$from,l=s.empty;if(s instanceof w.Bs){if(!r.endOfTextblock(n)||0==i.depth)return!1;l=!1,i=t.doc.resolve(e>0?i.after():i.before())}let a=E.findGapCursorFrom(i,e,l);return!!a&&(o&&o(t.tr.setSelection(new E(a))),!0)}}function O(t,e,n){if(!t||!t.editable)return!1;let o=t.state.doc.resolve(e);if(!E.valid(o))return!1;let r=t.posAtCoords({left:n.clientX,top:n.clientY});return!(r&&r.inside>-1&&w.qv.isSelectable(t.state.doc.nodeAt(r.inside)))&&(t.dispatch(t.state.tr.setSelection(new E(o))),!0)}function $(t,e){if("insertCompositionText"!=e.inputType||!(t.state.selection instanceof E))return!1;let{$from:n}=t.state.selection,o=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!o)return!1;let r=L.HY.empty;for(let i=o.length-1;i>=0;i--)r=L.HY.from(o[i].createAndFill(null,r));let s=t.state.tr.replace(n.pos,n.pos,new L.p2(r,0,0));return s.setSelection(w.Bs.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function P(t){if(!(t.selection instanceof E))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",H.EH.create(t.doc,[H.p.widget(t.selection.head,e,{key:"gapcursor"})])}const I=o.hj.create({name:"gapCursor",addProseMirrorPlugins:()=>[new w.Sy({props:{decorations:P,createSelectionBetween:(t,e,n)=>e.pos==n.pos&&E.valid(n)?new E(n):null,handleClick:O,handleKeyDown:R,handleDOMEvents:{beforeinput:$}}})],extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:null!==(e=(0,o.nU)((0,o.Nl)(t,"allowGapCursor",n)))&&void 0!==e?e:null}}}),B=o.NB.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:t}){return["br",(0,o.P1)(this.options.HTMLAttributes,t)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:o})=>t.first([()=>t.exitCode(),()=>t.command((()=>{const{selection:t,storedMarks:r}=n;if(t.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:i}=o.extensionManager,l=r||t.$to.parentOffset&&t.$from.marks();return e().insertContent({type:this.name}).command((({tr:t,dispatch:e})=>{if(e&&l&&s){const e=l.filter((t=>i.includes(t.type.name)));t.ensureMarks(e)}return!0})).run()}))])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),z=o.NB.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map((t=>({tag:`h${t}`,attrs:{level:t}})))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,(0,o.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.setNode(this.name,t),toggleHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return this.options.levels.reduce(((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})})),{})},addInputRules(){return this.options.levels.map((t=>(0,o.zK)({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}})))}});var D=200,j=function(){};j.prototype.append=function(t){return t.length?(t=j.from(t),!this.length&&t||t.length<D&&this.leafAppend(t)||this.length<D&&t.leafPrepend(this)||this.appendInner(t)):this},j.prototype.prepend=function(t){return t.length?j.from(t).append(this):this},j.prototype.appendInner=function(t){return new W(this,t)},j.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?j.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},j.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},j.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},j.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var o=[];return this.forEach((function(e,n){return o.push(t(e,n))}),e,n),o},j.from=function(t){return t instanceof j?t:t&&t.length?new K(t):j.empty};var K=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,o){for(var r=e;r<n;r++)if(!1===t(this.values[r],o+r))return!1},e.prototype.forEachInvertedInner=function(t,e,n,o){for(var r=e-1;r>=n;r--)if(!1===t(this.values[r],o+r))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=D)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=D)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(j);j.empty=new K([]);var W=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,o){var r=this.left.length;return!(e<r&&!1===this.left.forEachInner(t,e,Math.min(n,r),o))&&(!(n>r&&!1===this.right.forEachInner(t,Math.max(e-r,0),Math.min(this.length,n)-r,o+r))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,o){var r=this.left.length;return!(e>r&&!1===this.right.forEachInvertedInner(t,e-r,Math.max(n,r)-r,o+r))&&(!(n<r&&!1===this.left.forEachInvertedInner(t,Math.min(e,r),n,o))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(j),F=j;class Y{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(0==this.eventCount)return null;let n,o,r=this.items.length;for(;;r--){if(this.items.get(r-1).selection){--r;break}}e&&(n=this.remapping(r,this.items.length),o=n.maps.length);let s,i,l=t.tr,a=[],c=[];return this.items.forEach(((t,e)=>{if(!t.step)return n||(n=this.remapping(r,e+1),o=n.maps.length),o--,void c.push(t);if(n){c.push(new q(t.map));let e,r=t.step.map(n.slice(o));r&&l.maybeStep(r).doc&&(e=l.mapping.maps[l.mapping.maps.length-1],a.push(new q(e,void 0,void 0,a.length+c.length))),o--,e&&n.appendMap(e,o)}else l.maybeStep(t.step);return t.selection?(s=n?t.selection.map(n.slice(o)):t.selection,i=new Y(this.items.slice(0,r).append(c.reverse().concat(a)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:i,transform:l,selection:s}}addTransform(t,e,n,o){let r=[],s=this.eventCount,i=this.items,l=!o&&i.length?i.get(i.length-1):null;for(let c=0;c<t.steps.length;c++){let n,a=t.steps[c].invert(t.docs[c]),d=new q(t.mapping.maps[c],a,e);(n=l&&l.merge(d))&&(d=n,c?r.pop():i=i.slice(0,i.length-1)),r.push(d),e&&(s++,e=void 0),o||(l=d)}let a=s-n.depth;return a>U&&(i=function(t,e){let n;return t.forEach(((t,o)=>{if(t.selection&&0==e--)return n=o,!1})),t.slice(n)}(i,a),s-=a),new Y(i.append(r),s)}remapping(t,e){let n=new M.vs;return this.items.forEach(((e,o)=>{let r=null!=e.mirrorOffset&&o-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:void 0;n.appendMap(e.map,r)}),t,e),n}addMaps(t){return 0==this.eventCount?this:new Y(this.items.append(t.map((t=>new q(t)))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let n=[],o=Math.max(0,this.items.length-e),r=t.mapping,s=t.steps.length,i=this.eventCount;this.items.forEach((t=>{t.selection&&i--}),o);let l=e;this.items.forEach((e=>{let o=r.getMirror(--l);if(null==o)return;s=Math.min(s,o);let a=r.maps[o];if(e.step){let s=t.steps[o].invert(t.docs[o]),c=e.selection&&e.selection.map(r.slice(l+1,o));c&&i++,n.push(new q(a,s,c))}else n.push(new q(a))}),o);let a=[];for(let u=e;u<s;u++)a.push(new q(r.maps[u]));let c=this.items.slice(0,o).append(a).append(n),d=new Y(c,i);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d}emptyItemCount(){let t=0;return this.items.forEach((e=>{e.step||t++})),t}compress(t=this.items.length){let e=this.remapping(0,t),n=e.maps.length,o=[],r=0;return this.items.forEach(((s,i)=>{if(i>=t)o.push(s),s.selection&&r++;else if(s.step){let t=s.step.map(e.slice(n)),i=t&&t.getMap();if(n--,i&&e.appendMap(i,n),t){let l=s.selection&&s.selection.map(e.slice(n));l&&r++;let a,c=new q(i.invert(),t,l),d=o.length-1;(a=o.length&&o[d].merge(c))?o[d]=a:o.push(c)}}else s.map&&n--}),this.items.length,0),new Y(F.from(o.reverse()),r)}}Y.empty=new Y(F.empty,0);class q{constructor(t,e,n,o){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=o}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new q(e.getMap().invert(),e,this.selection)}}}class V{constructor(t,e,n,o){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=o}}const U=20;function G(t){let e=[];return t.forEach(((t,n,o,r)=>e.push(o,r))),e}function Q(t,e){if(!t)return null;let n=[];for(let o=0;o<t.length;o+=2){let r=e.map(t[o],1),s=e.map(t[o+1],-1);r<=s&&n.push(r,s)}return n}function X(t,e,n,o){let r=tt(e),s=et.get(e).spec.config,i=(o?t.undone:t.done).popEvent(e,r);if(!i)return;let l=i.selection.resolve(i.transform.doc),a=(o?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),c=new V(o?a:i.remaining,o?i.remaining:a,null,0);n(i.transform.setSelection(l).setMeta(et,{redo:o,historyState:c}).scrollIntoView())}let J=!1,Z=null;function tt(t){let e=t.plugins;if(Z!=e){J=!1,Z=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){J=!0;break}}return J}const et=new w.H$("history"),nt=new w.H$("closeHistory");function ot(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new w.Sy({key:et,state:{init:()=>new V(Y.empty,Y.empty,null,0),apply:(e,n,o)=>function(t,e,n,o){let r,s=n.getMeta(et);if(s)return s.historyState;n.getMeta(nt)&&(t=new V(t.done,t.undone,null,0));let i=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(i&&i.getMeta(et))return i.getMeta(et).redo?new V(t.done.addTransform(n,void 0,o,tt(e)),t.undone,G(n.mapping.maps[n.steps.length-1]),t.prevTime):new V(t.done,t.undone.addTransform(n,void 0,o,tt(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||i&&!1===i.getMeta("addToHistory"))return(r=n.getMeta("rebased"))?new V(t.done.rebased(n,r),t.undone.rebased(n,r),Q(t.prevRanges,n.mapping),t.prevTime):new V(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Q(t.prevRanges,n.mapping),t.prevTime);{let r=0==t.prevTime||!i&&(t.prevTime<(n.time||0)-o.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach(((t,o)=>{for(let r=0;r<e.length;r+=2)t<=e[r+1]&&o>=e[r]&&(n=!0)})),n}(n,t.prevRanges)),s=i?Q(t.prevRanges,n.mapping):G(n.mapping.maps[n.steps.length-1]);return new V(t.done.addTransform(n,r?e.selection.getBookmark():void 0,o,tt(e)),Y.empty,s,n.time)}}(n,o,e,t)},config:t,props:{handleDOMEvents:{beforeinput(t,e){let n=e.inputType,o="historyUndo"==n?rt:"historyRedo"==n?st:null;return!!o&&(e.preventDefault(),o(t.state,t.dispatch))}}}})}const rt=(t,e)=>{let n=et.getState(t);return!(!n||0==n.done.eventCount)&&(e&&X(n,t,e,!1),!0)},st=(t,e)=>{let n=et.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&X(n,t,e,!0),!0)};const it=o.hj.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:t,dispatch:e})=>rt(t,e),redo:()=>({state:t,dispatch:e})=>st(t,e)}),addProseMirrorPlugins(){return[ot(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),lt=o.NB.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:t}){return["hr",(0,o.P1)(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t})=>t().insertContent({type:this.name}).command((({tr:t,dispatch:e})=>{var n;if(e){const{$to:e}=t.selection,o=e.end();if(e.nodeAfter)t.setSelection(w.Bs.create(t.doc,e.pos));else{const r=null===(n=e.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();r&&(t.insert(o,r),t.setSelection(w.Bs.create(t.doc,o)))}t.scrollIntoView()}return!0})).run()}},addInputRules(){return[(0,o.x2)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),at=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,ct=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,dt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,ut=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,ht=o.vc.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:t=>"normal"!==t.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:t}){return["em",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,o.Cf)({find:at,type:this.type}),(0,o.Cf)({find:dt,type:this.type})]},addPasteRules(){return[(0,o.K9)({find:ct,type:this.type}),(0,o.K9)({find:ut,type:this.type})]}}),pt=o.NB.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",(0,o.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ft=o.NB.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",(0,o.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),mt=o.vc.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:t=>!!t.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:t}){return["span",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=(0,o.Jo)(t,this.type);return!!Object.entries(n).some((([,t])=>!!t))||e.unsetMark(this.name)}}}}),gt=/^(\d+)\.\s$/,bt=o.NB.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return 1===e?["ol",(0,o.P1)(this.options.HTMLAttributes,n),0]:["ol",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ft.name,this.editor.getAttributes(mt.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=(0,o.S0)({find:gt,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=(0,o.S0)({find:gt,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(mt.name),editor:this.editor})),[t]}}),wt=o.NB.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:t}){return["p",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),yt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,vt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Ct=o.vc.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("line-through")&&{}}],renderHTML({HTMLAttributes:t}){return["s",(0,o.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,o.Cf)({find:yt,type:this.type})]},addPasteRules(){return[(0,o.K9)({find:vt,type:this.type})]}}),kt=o.NB.create({name:"text",group:"inline"}),Mt=o.hj.create({name:"starterKit",addExtensions(){var t,e,n,o,r,i,l,a,c,u,h,p,m,g,w,y,v,M;const _=[];return!1!==this.options.blockquote&&_.push(s.configure(null===(t=this.options)||void 0===t?void 0:t.blockquote)),!1!==this.options.bold&&_.push(d.configure(null===(e=this.options)||void 0===e?void 0:e.bold)),!1!==this.options.bulletList&&_.push(f.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&_.push(b.configure(null===(o=this.options)||void 0===o?void 0:o.code)),!1!==this.options.codeBlock&&_.push(C.configure(null===(r=this.options)||void 0===r?void 0:r.codeBlock)),!1!==this.options.document&&_.push(k.configure(null===(i=this.options)||void 0===i?void 0:i.document)),!1!==this.options.dropcursor&&_.push(S.configure(null===(l=this.options)||void 0===l?void 0:l.dropcursor)),!1!==this.options.gapcursor&&_.push(I.configure(null===(a=this.options)||void 0===a?void 0:a.gapcursor)),!1!==this.options.hardBreak&&_.push(B.configure(null===(c=this.options)||void 0===c?void 0:c.hardBreak)),!1!==this.options.heading&&_.push(z.configure(null===(u=this.options)||void 0===u?void 0:u.heading)),!1!==this.options.history&&_.push(it.configure(null===(h=this.options)||void 0===h?void 0:h.history)),!1!==this.options.horizontalRule&&_.push(lt.configure(null===(p=this.options)||void 0===p?void 0:p.horizontalRule)),!1!==this.options.italic&&_.push(ht.configure(null===(m=this.options)||void 0===m?void 0:m.italic)),!1!==this.options.listItem&&_.push(pt.configure(null===(g=this.options)||void 0===g?void 0:g.listItem)),!1!==this.options.orderedList&&_.push(bt.configure(null===(w=this.options)||void 0===w?void 0:w.orderedList)),!1!==this.options.paragraph&&_.push(wt.configure(null===(y=this.options)||void 0===y?void 0:y.paragraph)),!1!==this.options.strike&&_.push(Ct.configure(null===(v=this.options)||void 0===v?void 0:v.strike)),!1!==this.options.text&&_.push(kt.configure(null===(M=this.options)||void 0===M?void 0:M.text)),_}})}}]);